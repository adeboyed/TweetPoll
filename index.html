<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>TweetPoll</title>
		<meta name="viewport" content="width=100%, initial-scale=1.0, maximum-scale=1.0">
		<!-- Loading Bootstrap -->
		<!-- <link href="css/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"> -->
		<!-- Loading Flat UI -->
		<link href="css/flat-ui.css" rel="stylesheet">
		<link href="css/index.css" rel="stylesheet" type="text/css" >
		<!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
		<!--[if lt IE 9]>
		<script src="dist/js/vendor/html5shiv.js"></script>
		<script src="dist/js/vendor/respond.min.js"></script>
		<![endif]-->

		<link rel="apple-touch-icon-precomposed" sizes="57x57" href="images/apple-touch-icon-57x57.png" />
		<link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/apple-touch-icon-114x114.png" />
		<link rel="apple-touch-icon-precomposed" sizes="72x72" href="images/apple-touch-icon-72x72.png" />
		<link rel="apple-touch-icon-precomposed" sizes="144x144" href="images/apple-touch-icon-144x144.png" />
		<link rel="apple-touch-icon-precomposed" sizes="60x60" href="images/apple-touch-icon-60x60.png" />
		<link rel="apple-touch-icon-precomposed" sizes="120x120" href="images/apple-touch-icon-120x120.png" />
		<link rel="apple-touch-icon-precomposed" sizes="76x76" href="images/apple-touch-icon-76x76.png" />
		<link rel="apple-touch-icon-precomposed" sizes="152x152" href="images/apple-touch-icon-152x152.png" />
		<link rel="icon" type="image/png" href="images/favicon-196x196.png" sizes="196x196" />
		<link rel="icon" type="image/png" href="images/favicon-96x96.png" sizes="96x96" />
		<link rel="icon" type="image/png" href="images/favicon-32x32.png" sizes="32x32" />
		<link rel="icon" type="image/png" href="images/favicon-16x16.png" sizes="16x16" />
		<link rel="icon" type="image/png" href="images/favicon-128.png" sizes="128x128" />
		<meta name="application-name" content="&nbsp;"/>
		<meta name="msapplication-TileColor" content="#FFFFFF" />
		<meta name="msapplication-TileImage" content="mstile-144x144.png" />
		<meta name="msapplication-square70x70logo" content="mstile-70x70.png" />
		<meta name="msapplication-square150x150logo" content="mstile-150x150.png" />
		<meta name="msapplication-wide310x150logo" content="mstile-310x150.png" />
		<meta name="msapplication-square310x310logo" content="mstile-310x310.png" />
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/fira.css">
		<script src="js/vendor/jquery.min.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.min.js"></script>

		</script>
	</head>
	<body>
		<div id="page-container">
			<h1>TweetPoll</h1>
			<canvas id="page-graph">

			</canvas>
			<div class="search-element-group display-none" id="search-element-group">
				<h2 class="search-element-search">Jeremy Corbyn</h2>
				<h4 class="search-element-updated">Last Updated: 3 hours ago</h4>
				<div class="search-element-bars">
					<div class="search-element-loading">
						<div class="search-element-loading-overlay"></div>
					</div>
					<div class="search-element-percentage">
						<div class="search-element-green"></div>
						<div class="search-element-red"></div>
					</div>
				</div>
				<h3 class="search-percent-green">23%</h3>
				<h3 class="search-percent-red">77%</h3>
			</div>
		</div>
		<script>
			var searches = [
				['Jeremy Corbyn', '3 hours ago', 23],
				['Theresa May', '1 hour ago', 88],
				['Donald Trump', '10 minutes ago', 32],
				['Harry Maughan', '5 hours ago', 44],
				['David Adeboye', '45 minutes ago', 23],
				['Devavrata Soni', '13 minutes ago', 9],
			];
			function createSearch(name, updateTime, greenPercent) {
				var $searchBlock = $("#search-element-group").clone();
				$searchBlock.appendTo("#page-container");
				$searchBlock.find(".search-percent-green").html(greenPercent.toString().concat("%"));
				$searchBlock.find(".search-percent-red").html((100-greenPercent).toString().concat("%"));
				$searchBlock.find(".search-element-search").html(name);
				$searchBlock.find(".search-element-updated").html("Last Updated: ".concat(updateTime));
				$searchBlock.removeClass("display-none");
			};
			$(document).ready(function() {
				function getRandomInt(min, max) {
				  min = Math.ceil(min);
				  max = Math.floor(max);
				  return Math.floor(Math.random() * (max - min)) + min;
				}
				for (search of searches) {
					createSearch(search[0], search[1], search[2]);
				};
				$(".search-element-group").each(function() {
					var loadingTime = getRandomInt(1000, 5000);
					var greenNum = getRandomInt(5, 95);
					$(this).find(".search-element-loading-overlay").animate({
						width: "100%",
					}, loadingTime).delay(loadingTime).fadeOut();
					$(this).find(".search-element-loading").delay(loadingTime).fadeOut();
					$(this).find(".search-element-red").delay(loadingTime).animate({
						width: $(this).find(".search-percent-red").text(),
					}, 1000);
					$(this).find(".search-element-green").delay(loadingTime).animate({
						width: $(this).find(".search-percent-green").text(),
					}, 1000);
					$(this).find(".search-percent-red").delay(loadingTime).fadeIn();
					$(this).find(".search-percent-green").delay(loadingTime).fadeIn();
				});
			});
		</script>
		<script>
		var graph_data = [
			['Jeremy Corbyn', [1, 7, 5, 8, 11, 23]],
			['Theresa May', [56, 64, 48, 57, 71, 88]],
			['Donald Trump', [23, 34, 27, 24, 30, 34]]
		]
		var colors = [
			["rgba(219, 45, 45, 0.2)", "rgba(219, 45, 45, 1)"],
			["rgba(45, 45, 219, 0.2)", "rgba(45, 45, 219 1)"],
			["rgba(23, 139, 81, 0.2)", "rgba(23, 139, 81, 1)"]
		]
		var graph = document.getElementById("page-graph");
		var myChart = new Chart(graph, {
		    type: 'line',
		    data: {
		        labels: ["18/4", "19/4", "20/4", "21/4", "22/4", "23/4"],
		        datasets: []
		    },
				options: {
            scaleFontColor: 'red',
		        responsive: true,
		        tooltips: {
		            mode: 'single',
		        },
						legend: {
								labels: {fontColor:"lightgrey"}},
		        scales: {
		            xAxes: [{
		                gridLines: {
		                    display: false,
		                },
		                ticks: {
		                  fontColor: "#CCC", // this here
		                },
		            }],
		            yAxes: [{
										ticks: {
		                    beginAtZero:true,
												fontColor: "#CCC"
		                },
		            }],
		        }
    		}
		});
		for (i in graph_data) {
			myChart.data.datasets.push({
					label: graph_data[i][0],
					data: graph_data[i][1],
					backgroundColor: [colors[i][0]],
					borderColor: [colors[i][1]],
					borderWidth: 1
			});
			myChart.update();
		}
		</script>
	</body>
</html>
